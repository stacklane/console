<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% partial /_layout }}
{{% svg /_icons/ as ic }}

{{% json /projects/_examples as examples}}
{{% import {NewProjectForm} from 'ðŸ“¤' }}

{{< layout}}

{{$nav}}
<span class="navbar-item is-nav-title">Projects</span>
{{/nav}}

{{$content}}

<div class="box is-spacious">

    <div class="has-text-centered">
        <span class="has-text-grey">
            <span class="icon is-medium">{{>ic-git_pull_request}}</span>
        </span>

        <h3 class="title is-3">New Project</h3>

        <p>
            Projects are associated with a public or private GIT repository.
            They contain live deployments, test instances, keys, and data.
        </p>
    </div>

    <hr>

    <div class="tabs {{#ðŸŽ¨.tabs-boxed}}is-boxed{{/ðŸŽ¨.tabs-boxed}}" data-controller="tabs" data-tabs-remember="repoType">
        <ul>
            <li><a id="example-tab" href="#example"><span class="icon">{{>ic-library_add}}</span>&nbsp;<span>Examples</span></a></li>
            <li><a id="bitbucket-tab" href="#bitbucket"><span class="icon">{{>ic-logo_bitbucket}}</span>&nbsp;<span>Bitbucket</span></a></li>
            <li><a id="github-tab" href="#github"><span class="icon">{{>ic-logo_github}}</span>&nbsp;<span>GitHub</span></a></li>
        </ul>
    </div>

    {{#NewProjectForm.Begin.view}}
    {{#source as field}}
    <div class="tab-content">
        <div class="tab-pane" id="example" aria-labelledby="example-tab">
            <div class="message is-info">
                <div class="message-body">
                    Quickly get started with one of our open source examples.
                </div>
            </div>

            <div class="columns">
                {{#examples as example}}
                <div class="column is-half">
                    <form method="post" action="new?_form={{id}}" data-controller="form" data-form-ajax="true">
                        <input type="hidden" name="{{field.path}}" value="{{example.src}}">
                        <div class="box media">
                            <div class="media-left">
                                <button class="button is-primary is-small" type="submit">
                                    <span class="icon is-small has-text-white">{{>ic-add_plus}}</span>
                                </button>
                            </div>
                            <div class="media-content">
                                <div>
                                    <p>
                                        <strong>{{example.title}}</strong> <small></small>
                                        <br>
                                        {{example.desc}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                {{/examples}}
            </div>
        </div>

        <div class="tab-pane" id="bitbucket" aria-labelledby="bitbucket-tab">
            <div class="message is-info">
                <div class="message-body">
                    Stacklane supports both public and private repositories.

                    For public HTTPS repositories, initialize a public repository at
                    <a target="_blank" href="https://bitbucket.org">bitbucket.org</a>
                    with the required manifest file (ðŸŽ›.yaml).

                    For private SSH repositories, initialize a private repository and use its SSH URL.
                    After creating the project you'll be able to generate an SSH key to provide Bitbucket.
                </div>
            </div>

            <div>
                <form method="post" action="new?_form={{id}}"
                      data-controller="form"
                      data-form-validate="true"
                      data-form-ajax="true">

                    <div class="field">
                        <label class="label">Bitbucket Repository URL</label>
                        <div class="control">
                            <input id="bitbucket-url" name="{{field.path}}" type="text" required
                                   class="input" placeholder="https://bitbucket.org/your/stacklane-repo.git">
                        </div>
                        <p class="help">
                            The HTTPS or SSH URL to the public or private repository.
                            Both URL types end with <code>.git</code>.
                        </p>
                    </div>

                    <hr>

                    <p class="has-text-right">
                        <button class="button is-primary" type="submit">Next</button>
                    </p>
                </form>
            </div>
        </div>

        <div class="tab-pane" id="github" aria-labelledby="github-tab">
            <div class="message is-info">
                <div class="message-body">
                    Stacklane supports both public and private repositories.

                    For public HTTPS repositories, initialize a public repository at
                    <a target="_blank" href="https://github.com">github.com</a>
                    with the required manifest file (ðŸŽ›.yaml).

                    For private SSH repositories, initialize a private repository and use its SSH URL.
                    After creating the project you'll be able to generate an SSH key to provide GitHub.
                </div>
            </div>

            <div>
                <form method="post" action="new?_form={{id}}"
                      data-controller="form"
                      data-form-validate="true"
                      data-form-ajax="true">

                    <div class="field">
                        <label class="label">GitHub Repository URL</label>
                        <div class="control">
                            <input id="github-url" name="{{field.path}}" type="text" required
                                   class="input" placeholder="https://github.com/your/stacklane-repo.git">
                        </div>
                        <p class="help">
                            The HTTPS or SSH URL to the public or private repository.
                            Both URL types end with <code>.git</code>.
                        </p>
                    </div>

                    <hr>

                    <p class="has-text-right">
                        <button class="button is-primary" type="submit">Next</button>
                    </p>
                </form>
            </div>
        </div>
    </div>
    {{/source}}
    {{/NewProjectForm.Begin.view}}
</div>

{{/content}}
{{/layout}}