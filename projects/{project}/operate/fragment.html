<!--TEMPLATE mustache-->

{{% svg /_icons/ as ic }}

{{% import {project} from 'ðŸ”—' }}
{{% import {Project, ProjectDeployment} from 'ðŸ“¦' }}
{{% import {IsProjectStarred, ProjectDeployment deployment, ProjectModeSimple, ProjectModeSimpleNav, GetUnits} from 'ðŸ“¤' }}

{{#ProjectDeployment.all as deploy}}
{{#deploy.name}}
  {{!deploy.name}}

  {{#GetUnits deploy as unit}}
    <div class="box">
        <div class="level is-mobile">
            <div class="level-left">
                <div class="level-item title is-5">
                    {{unit.name}}
                </div>
            </div>
            <div class="level-right">
                <div class="level-item has-text-centered">
                    <div>
                        <p class="heading">Now</p>
                        <p class="title has-text-link" data-controller="number">{{unit.value}}</p>
                    </div>
                </div>
                {{#unit.hasPrevious}}
                <div class="level-item has-text-centered is-hidden-mobile">
                    <div>
                        <p class="heading">Change</p>
                        <p class="title has-text-grey" data-controller="percent">{{unit.changePercent}}</p>
                    </div>
                </div>
                <div class="level-item has-text-centered is-hidden-mobile">
                    <div>
                        <p class="heading">Last Week</p>
                        <p class="title has-text-grey-dark" data-controller="number">{{unit.previous}}</p>
                    </div>
                </div>
                {{/unit.hasPrevious}}
            </div>
        </div>
    </div>
  {{/GetUnits}}
{{/deploy.name}}
{{/ProjectDeployment.all}}

{{^ProjectDeployment.all}}
{{#ProjectModeSimple}}
<div class="box">
<ul class="tasks"
    data-controller="activator"
    data-activator-mode="target"
    data-activator-deactivate="others">

    <li class="task is-activator">
        <div class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <span class="task-icon icon is-small">{{>ic-code}}</span>
                </div>
                <div class="level-item">
                    <div>
                        <h6 class="task-title">Develop your project</h6>
                        <blockquote class="task-content">
                            Explore our documentation, open for your favorite IDE, and code.
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <div class="task-content">
                        <a class="button" target="_blank" href="{{ðŸŽ¨.docs}}">Docs</a>
                    </div>
                </div>
                <div class="level-item">
                    <div class="task-content">
                        <a class="button" href="{{ProjectModeSimpleNav.source}}">Source</a>
                    </div>
                </div>
            </div>
        </div>
    </li>

    <li class="task is-activator">
        <div class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <span class="task-icon icon is-small">{{>ic-web-test}}</span>
                </div>
                <div class="level-item">
                    <div>
                        <h6 class="task-title">Start testing</h6>
                        <blockquote class="task-content">
                            Create a temporary test instance and shareable link.
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <div class="task-content">
                        <a class="button" href="{{ProjectModeSimpleNav.test}}">Test</a>
                    </div>
                </div>
            </div>
        </div>
    </li>

    {{^project.account.linked}}
    <li class="task is-activator">
        <div class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <span class="task-icon icon is-small">{{>ic-billing}}</span>
                </div>
                <div class="level-item">
                    <div>
                        <h6 class="task-title">Setup billing</h6>
                        <blockquote class="task-content">
                            Setup billing information for this Project.
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <div class="task-content">
                        <a class="button" href="/projects/{{project.id}}/account/" data-turbolinks="false">Billing</a>
                    </div>
                </div>
            </div>
        </div>
    </li>
    {{/project.account.linked}}

    <li class="task is-activator">
        <div class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <span class="task-icon icon is-small">{{>ic-domain}}</span>
                </div>
                <div class="level-item">
                    <div>
                        <h6 class="task-title">Deploy and go live</h6>
                        <blockquote class="task-content">
                            Configure a domain and go live
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <div class="task-content">
                        <a class="button" href="{{ProjectModeSimpleNav.live}}">Setup</a>
                    </div>
                </div>
            </div>
        </div>
    </li>
</ul>
</div>
{{/ProjectModeSimple}}
{{/ProjectDeployment.all}}