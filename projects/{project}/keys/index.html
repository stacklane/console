<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}
{{% import {GetProjectName} from 'ðŸ“¤' }}

{{< layout}}

{{$nav}}

{{< nav-link-nic}}
{{$path}}/projects/{{project.id}}/{{/path}}
{{$label}}{{GetProjectName project}}{{/label}}
{{/ nav-link-nic}}

{{< nav-spacer}}{{/ nav-spacer}}

{{< nav-link-active}}
{{$label}}Keys{{/label}}
{{$icon}}{{> ic-key}}{{/icon}}
{{/ nav-link-active}}

{{/nav}}

{{$content}}

{{% import {ProjectKey} from 'ðŸ“¦' }}


<div class="text-right mb-4">
    <a class="btn btn-primary" href="new">New Project Key</a>
</div>

{{#ProjectKey.all by 2 as grp}}
<div class="card-deck">
    {{#grp as key}}
    <span class="card mb-4">
        <div class="card-body">
            <h6 class="card-title mb-0">
                <span data-controller="badge" class="badge">{{key.state}}</span>
                <span class="badge badge-secondary">{{key.type}}</span> {{key.name}}
            </h6>
            <p class="card-text">
                {{key.description}}
            </p>
        </div>
    </span>
    {{/grp}}
</div>
{{/ProjectKey.all}}

{{^ProjectKey.all}}
<div class="box is-capped is-spacious">

    <div class="has-text-centered">
        <span class="icon is-medium has-text-gray">
        {{> ic-key}}
        </span>

        <h2 class="title is-2">Welcome to Project Keys</h2>

        <p>
            This is a secure vault for third party API credentials.
            Code running from within this Project will have access to
            these keys for third party authentication, but will never
            be able to expose them publicly.
            To get started, <a href="new">create a project key</a>.
        </p>
    </div>

</div>
{{/ProjectKey.all}}

{{/content}}
{{/layout}}