<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}
{{% import {GetProjectName} from 'ðŸ“¤' }}

{{% partial /projects/{project}/_project-side }}
{{% partial /projects/{project}/_project-nav }}

{{< layout}}

{{$nav}}
{{> project-nav}}
{{/nav}}

{{$side}}
{{> project-side}}
{{/side}}

{{$content}}

<div class="box">
    <div class="media">
        <div class="media-left">
            <span class="icon is-medium has-text-grey">
                {{> ic-key}}
            </span>
        </div>
        <div class="media-content">
            <h5 class="title is-5">Create a Project Key</h5>
            <p class="subtitle is-6">
                Keys are stored in a secure vault and values are only used for connecting to services.
            </p>
        </div>
    </div>
</div>

<div class="box">
    <div class="tabs {{#ðŸŽ¨.tabs-boxed}}is-boxed{{/ðŸŽ¨.tabs-boxed}}" data-controller="tabs">
        <ul>
            <li class="is-active"><a id="api-tab" href="#api"><span class="icon">{{>ic-extension}}</span>&nbsp;<span>Third Party API</span></a></li>
            <li><a id="user-tab" href="#user"><span class="icon">{{>ic-verified_user}}</span>&nbsp;<span>Identity Provider</span></a></li>
        </ul>
    </div>

    <div class="tab-content">
        <div class="tab-pane is-active" id="api" aria-labelledby="api-tab">
            <div class="message is-info">
                <div class="message-body">
                    Defines a token for connecting to a third party API.
                </div>
            </div>

            <form method="post" action="newApi"
                  data-controller="form"
                  data-validate="true"
                  data-ajax="true">
                <div class="field">
                    <label class="label">Domain Name</label>
                    <div class="control">
                        <input type="text" class="input" id="name" name="name" placeholder="abc.com" required>
                    </div>
                    <p class="help"> Third party domain name.</p>
                </div>
                <div class="field">
                    <label class="label" for="token">Token</label>
                    <div class="control">
                        <input type="text" class="input" id="token" name="token" placeholder="" required>
                    </div>
                    <p class="help">Authentication token obtained from the third party provider.</p>
                </div>
                <hr>
                <div class="has-text-right">
                    <button class="button is-primary" type="submit">Create</button>
                </div>
            </form>
        </div>

        <div class="tab-pane" id="user" role="tabpanel" aria-labelledby="user-tab">
            <div class="message is-info">
                <div class="message-body">
                    Defines information for connecting to a user identity provider.
                    Setup your OAUTH app with <span class="tag is-white">domain</span>/__/auth/handler
                    as an authorized redirect URI or callback URL.
                    To allow the test environment specify <span class="tag is-white">auth.execute.website</span> as the domain.
                </div>
            </div>

            <form method="post" action="newUser"
                  data-controller="form"
                  data-validate="true"
                  data-ajax="true">

                <div class="field">
                    <label class="label" for="identityType">Identity Provider</label>
                    <div class="control">
                        <div class="select">
                        <select id="identityType" required name="identityType">
                            <option value="">Choose...</option>
                            <option value="google">Google</option>
                            <option value="github">GitHub</option>
                        </select>
                        </div>
                    </div>
                    <p class="help">
                        Choose the third party identity provider you have obtained OAUTH keys from.
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="clientId">Client ID</label>
                    <input type="text" class="input" id="clientId" name="clientId" placeholder="" required>
                    <p class="help">
                        Client ID given by the identity provider.
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="secret">Secret</label>
                    <input type="text" class="input" id="secret" name="secret" placeholder="" required>
                    <p class="help">
                        Secret key given by the identity provider.
                    </p>
                </div>
                <hr>
                <div class="has-text-right">
                    <button class="button is-primary" type="submit">Create</button>
                </div>
            </form>
        </div>
    </div>
</div>


{{/content}}
{{/layout}}