<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}

{{% partial /projects/{project}/_project-side }}
{{% partial /projects/{project}/_project-nav }}

{{< layout}}

{{$nav}}
{{> project-nav}}
{{/nav}}

{{$side}}
{{> project-side}}
{{/side}}

{{$content}}

<div class="box">
    <div class="media">
        <div class="media-left">
            <span class="icon is-medium has-text-grey">
                {{> ic-credit_card}}
            </span>
        </div>
        <div class="media-content">
            <h5 class="title is-5">Billing Setup</h5>
            <p class="subtitle is-6">
                Setup billing information for this Project.
            </p>
        </div>
    </div>
</div>

<div class="box">

<div data-controller="get" data-get-href="pricing" class="is-loading">Loading</div>

<hr>

<form method="post" action="new"
      data-controller="form"
      data-form-validate="true"
      data-form-ajax="true">

    <div class="field" >
        <label class="label">Cardholder Name</label>
        <div class="control">
            <div class="card-element"></div>
            <input type="text" class="input" name="cardholderName" id="cardholderName" required minlength="3">
        </div>
    </div>

    <div class="field" data-controller="stripe-card" data-stripe-card-pk="{{ðŸŽ¨.stripe-pk}}"
         data-stripe-card-name="cardholderName" data-stripe-card-token="stripeToken">
        <label class="label">Credit Card</label>
        <div class="control">
            <div class="card-element"></div>
        </div>
        <p class="help card-errors"></p>
    </div>

    <hr>

    <p class="has-text-right">
         <!-- must be type='button' for Safari CORS + stripe tokenization? -->
        <button type="submit" class="button is-primary">Upgrade</button>
    </p>
</form>

</div>

{{/content}}
{{/layout}}