<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}
{{% import {ProjectInstance} from 'ðŸ“¦'}}
{{% import {GetProjectName, ProjectUser} from 'ðŸ“¤' }}

{{< layout}}

{{$nav}}

{{/nav}}

{{$content}}

<div class="box is-capped"
     data-controller="project"
     data-project-id="{{project.id}}"
    >
    <div class="media">
        <div class="media-left">
            <span class="icon is-large">
                <svg width="32" height="32" data-controller="identicon" data-value="{{project.id}}"></svg>
            </span>
        </div>
        <div class="media-content">
            <h5 class="is-size-5 has-text-weight-semibold"> <!-- was title is-5 -->
                <input data-action="change->project#changeTitle" type="text" data-target="project.title"
                       class="is-display" value="{{GetProjectName project}}" placeholder="Use Default"
                   autocomplete="off" autocorrect="off"
                   autocapitalize="off" spellcheck="false" data-gramm="false"
                >
            </h5>
            <nav class="level is-mobile">
                <div class="level-left">
                    <a class="level-item tooltip" data-tooltip="Manage Project Keys" href="keys/">
                        <span class="icon is-small has-text-grey">{{>ic-key}}</span>
                        &nbsp;Keys
                    </a>
                </div>
            </nav>
        </div>
        <div class="media-right">
            <label class="toggler has-text-warning">
                <input data-target="project.star"
                       data-action="change->project#changeStar"
                       type="checkbox" class="is-filter-tag"
                       {{#ProjectUser.star}}checked{{/ProjectUser.star}}>
                <span class="is-checked tooltip" data-tooltip="Favorite"><span class="tag is-white"><span class="icon">{{>ic-star}}</span></span></span>
                <span class="is-unchecked tooltip" data-tooltip="Favorite"><span class="tag is-white"><span class="icon">{{>ic-star_border}}</span></span></span>
            </label>
        </div>
    </div>
</div>

{{#ProjectInstance.all as instance}}
<div class="box">
    <div class="media">
        <!--div class="media-left">

        </div-->
        <div class="media-content">
            <h5 class="is-size-5">
                {{instance.source.value}}
            </h5>
            <nav class="level is-mobile">
                <div class="level-left">
                    <a class="level-item tooltip" data-tooltip="Manage Domain Mapping" href="instances/{{instance.id}}/domain/">
                        <span class="icon is-small has-text-grey">{{>ic-domain}}</span>
                        &nbsp;Domain
                    </a>
                </div>
            </nav>
        </div>
        <div class="media-right">

        </div>
    </div>
</div>
{{/ProjectInstance.all}}

{{/content}}
{{/layout}}
