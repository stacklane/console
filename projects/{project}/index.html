<!--TEMPLATE mustache-->
{{% partial /_partials/_nav/ as nav }}
{{% partial /_partials/_util/ as util }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}
{{% import {Project} from 'ðŸ“¦'}}
{{% import {GetProjectName, IsProjectStarred, GetChildProjects} from 'ðŸ“¤' }}

{{% partial /projects/{project}/_project-side }}
{{% partial /projects/{project}/_project-nav }}

{{< layout}}

{{$nav}}
{{> project-nav}}
{{/nav}}

{{$side}}
{{> project-side}}
{{/side}}

{{$content}}

<div class="box"
     data-controller="project"
     data-project-id="{{project.id}}"
    >
    <div class="media">
        <div class="media-left">
            <span class="icon is-large">
                <svg width="32" height="32" data-controller="identicon" data-value="{{project.id}}"></svg>
            </span>
        </div>
        <div class="media-content">
            <h5 class="is-size-5 title has-text-weight-semibold"> <!-- was title is-5 -->
                <input data-action="change->project#changeTitle" type="text" data-target="project.title"
                       class="is-display" value="{{GetProjectName project}}" placeholder="Use Default"
                     {{>util-disable-spell}}
                >
            </h5>
            {{#project.source.external}}
            <h6 class="subtitle">
                <a href="{{project.source.external}}" target="_blank" >
                    <!--span class="icon is-small has-text-link">{{>ic-code}}</span-->
                    <!-- data-tooltip=" @ {{project.source.type}}" -->
                    <div class="tags has-addons">
                        <span class="tag is-light">{{project.source.short}}</span>
                        {{#project.source.branch}}
                        <span class="tag is-primary">{{project.source.branch}}</span>
                        {{/project.source.branch}}
                    </div>
                </a>
            </h6>
            {{/project.source.external}}
            <nav class="level is-mobile">
                <div class="level-left">
                    <a class="level-item" href="keys/">
                        <span class="icon is-small has-text-link">{{>ic-key}}</span>
                        <span class="has-text-weight-bold">&nbsp;Keys</span>
                    </a>
                    <a class="level-item" href="domain/">
                        <span class="icon is-small has-text-link">{{>ic-domain}}</span>
                        <span class="has-text-weight-bold">&nbsp;Domain</span>
                    </a>
                    <a class="level-item" href="properties/">
                        <span class="icon is-small has-text-link">{{>ic-palette}}</span>
                        <span class="has-text-weight-bold">&nbsp;Theme</span>
                    </a>
                    <a class="level-item" href="test/">
                        <span class="icon is-small has-text-link">{{>ic-web}}</span>
                        <span class="has-text-weight-bold">&nbsp;Test</span>
                    </a>
                </div>
            </nav>
        </div>
        <div class="media-right">
            <nav class="level is-mobile">
                <div class="level-left">

                    <a class="tooltip level-item" href="copy/" data-tooltip="Copy">
                        <span class="icon is-small has-text-link">{{>ic-copy}}</span>
                    </a>

                    {{^project.get.mapping}}
                    <a class="tooltip level-item" data-action="project#delete" data-tooltip="Delete">
                        <span class="icon is-small has-text-link">{{>ic-delete_forever}}</span>
                    </a>
                    {{/project.get.mapping}}

                    <label class="toggler has-text-warning level-item">
                        <input data-target="project.star"
                               data-action="change->project#changeStar"
                               type="checkbox" class="is-filter-tag"
                               {{#IsProjectStarred project}}checked{{/IsProjectStarred}}>
                        <span class="is-checked tooltip icon is-small" data-tooltip="Favorite">{{>ic-star}}</span>
                        <span class="is-unchecked tooltip icon is-small" data-tooltip="Favorite">{{>ic-star_border}}</span>
                    </label>
                </div>
            </nav>
        </div>
    </div>
</div>

{{#GetChildProjects project as child}}

<span>{{GetProjectName child.project}}</span>

{{/GetChildProjects}}

{{/content}}
{{/layout}}
