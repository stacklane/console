<!--TEMPLATE mustache-->

{{% partial /_partials/_nav/ as nav }}
{{% partial /_partials/_util/ as util }}
{{% svg /_icons/ as ic }}
{{% partial /_layout }}

{{% import {project} from 'ðŸ”—' }}

{{% partial /projects/{project}/_project-side }}
{{% partial /projects/{project}/_project-nav }}

{{< layout}}

{{$nav}}
{{> project-nav}}
{{/nav}}

{{$side}}
{{> project-side}}
{{/side}}

{{$content}}

<div class="box is-spacious">

    <div class="has-text-centered">
         <spdan class="icon is-large has-text-grey">
             {{>ic-copy}}
         </spdan>

        <h3 class="title is-3">Copy Project</h3>

        <p>

        </p>
    </div>

    <hr>

    <div class="message is-info">
        <div class="message-body">
            Only the source, keys, and any optional theme settings will be copied.
        </div>
    </div>

    <div>
        <form method="post" action="copy"
              data-controller="form"
              data-validate="true" data-ajax="true">

            <div class="field">
                <label class="label">Source</label>
                <div class="control">
                    <input class="input" type="text" value="{{project.get.source.main}}" readonly>
                </div>
                <p class="help">
                    The copy will use the same source has the original.
                </p>
            </div>

            {{#project.get.source.branch}}
            <div class="field">
                <label class="label">Branch</label>
                <div class="control">
                    <input class="input" type="text" name="branch"
                           pattern="[a-zA-Z0-9\._\-]{1,25}" data-pattern-msg="Invalid branch"
                           placeholder="{{project.get.source.branch}}" {{>util-disable-spell}}>
                </div>
                <p class="help">
                    Leave the source's branch the same, or set a different branch.
                </p>
            </div>
            {{/project.get.source.branch}}

            <hr>

            <p class="has-text-right">
                <button class="button is-primary" type="submit">Create Copy</button>
            </p>
        </form>
    </div>

</div>


{{/content}}
{{/layout}}